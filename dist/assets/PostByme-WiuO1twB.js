import{r as a,j as e}from"./index-expeoYE1.js";import{a as i}from"./axios-x9P0maA2.js";const j=()=>{const[l,o]=a.useState([]),[n,x]=a.useState(null),[d,c]=a.useState(null),[m,h]=a.useState(!0),u=localStorage.getItem("userId");a.useEffect(()=>{(async()=>{try{const s={method:"get",maxBodyLength:1/0,url:`http://localhost:3001/posts/by-author/${u}`},r=await i.request(s);o(r.data)}catch(s){c(s.message)}finally{h(!1)}})()},[]);const g=t=>{x(n===t?null:t)},b=async t=>{try{await i.delete(`http://localhost:3001/posts/delete/${t}`),o(l.filter(s=>s._id!==t))}catch{c("Failed to delete the post")}};return m?e.jsx("p",{className:"text-center text-xl font-bold animate-pulse",children:"Loading..."}):d?e.jsxs("p",{className:"text-center text-red-500 text-xl font-bold",children:["Error: ",d]}):e.jsxs("div",{className:"container mx-auto px-4 py-8 border border-gray-500 border-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-500 mb-4",children:"Posts by Author"}),l.length>0?e.jsx("div",{children:l.map((t,s)=>e.jsxs("div",{className:`post bg-yellow-100 shadow-md overflow-hidden mb-8 rounded-sm ${s>0?"mt-8":""}`,children:[e.jsx("h3",{className:"text-4xl font-semibold text-green-500 border-b-2 border-gray-700 mb-2 pb-2 text-center cursor-pointer",onClick:()=>g(t._id),children:t.title}),n===t._id&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-700 mb-4",children:t.summary}),e.jsx("div",{dangerouslySetInnerHTML:{__html:t.content}}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Likes: ",t.likes]}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("img",{src:t.author.profileImage,alt:"Author Profile",className:"w-8 h-8 rounded-full mr-2"}),e.jsx("button",{className:"bg-red-500 text-white p-2 rounded ml-auto",onClick:()=>b(t._id),children:"Delete Post"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-500 mt-4 mb-2",children:"Comments:"}),t.comments.map(r=>e.jsxs("div",{className:"comment bg-gray-100 rounded p-2 mb-2",children:[e.jsx("p",{className:"text-gray-700",children:r.text}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(r.date).toLocaleString()})]},r._id))]})]})]},t._id))}):e.jsx("p",{className:"text-center text-gray-500 text-xl font-bold",children:"No posts found for this author."})]})};export{j as default};
